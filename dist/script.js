(()=>{"use strict";const e=(e,t,n,l)=>{let o,a=1;const s=document.querySelectorAll(e);function c(e){e>s.length&&(a=1),e<1&&(a=s.length),s.forEach((e=>{e.style.display="none",e.classList.add("animate__animated")})),s[a-1].style.display="block"}function i(e){c(a+=e)}c(e);try{const e=document.querySelector(n),t=document.querySelector(l);e.addEventListener("click",(()=>{i(-1),s[a-1].classList.remove("animate__slideInLeft"),s[a-1].classList.add("animate__slideInRight")})),t.addEventListener("click",(()=>{i(1),s[a-1].classList.remove("animate__slideInRight"),s[a-1].classList.add("animate__slideInLeft")}))}catch(e){}function r(){o="horizontal"===t?setInterval((()=>{i(1),s[a-1].classList.remove("animate__slideInRight"),s[a-1].classList.add("animate__slideInLeft")}),3e3):setInterval((()=>{i(1),s[a-1].classList.add("animate__slideInDown")}),3e3);try{const e=document.querySelector(n),t=document.querySelector(l);e.addEventListener("click",(()=>{clearInterval(o)})),t.addEventListener("click",(()=>{clearInterval(o)}))}catch(e){}}r(),s.forEach((e=>{e.addEventListener("mouseenter",(()=>{clearInterval(o)})),e.addEventListener("mouseleave",(()=>{r()}))}))},t=e=>{function t(e){let t=0,l="+7 (___) ___ __ __",o=l.replace(/\D/g,""),a=this.value.replace(/\D/g,"");o.length>=a.length&&(a=o),this.value=l.replace(/./g,(function(e){return/[_\d]/.test(e)&&t<a.length?a.charAt(t++):t>=a.length?"":e})),"blur"===e.type?2==this.value.length&&(this.value=""):"click"===e.type&&2==this.value.length?n(3,this):n(this.value.length,this)}let n=(e,t)=>{if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){let n=t.createTextRange();n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select()}};document.querySelectorAll(e).forEach((e=>{e.addEventListener("input",t),e.addEventListener("focus",t),e.addEventListener("blur",t),e.addEventListener("click",t)}))},n=e=>{document.querySelectorAll(e).forEach((e=>{e.addEventListener("keypress",(e=>{e.key.match(/[^а-яё 0-9]/gi)&&e.preventDefault()})),e.addEventListener("input",(()=>{e.value.match(/[^а-яё 0-9]/gi)&&(e.value="",setTimeout((()=>{e.value=""}),0))}))}))},l=(e,t)=>{const n=document.querySelector(e),l=document.querySelector(t);n.addEventListener("click",(function(){(async e=>{let t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status: ${fetch.status}`);return await t.json()})("assets/db.json").then((e=>{e.styles.forEach((e=>{let t=document.createElement("div");t.classList.add("animate__animated","animate__fadeInUp","col-sm-3","col-sm-offset-0","col-xs-10","col-xs-offset-1");let{src:n,title:o,link:a}=e;t.innerHTML=`\n            \t\t<div class='styles-block'>\n\t\t\t\t\t\t<img src=${n} alt></img>\n\t\t\t\t\t\t<h4>${o}</h4>\n\t\t\t\t\t\t<a href=${a}>Подробнее</a>\n\t\t\t\t\t</div>`,l.append(t)}))})),this.remove()}))},o=(e,t)=>{const n=document.querySelectorAll(e);n.forEach((e=>{e.addEventListener("click",(function(){const e=this.classList.contains("active");n.forEach((e=>{e.classList.remove("active"),e.nextElementSibling.classList.remove("active"),e.nextElementSibling.style.maxHeight="0px"})),e||(this.classList.add("active"),this.nextElementSibling.classList.add("active"),this.nextElementSibling.style.maxHeight=this.nextElementSibling.scrollHeight+80+"px")}))}))},a=e=>{const t=document.querySelector(e);window.addEventListener("scroll",(()=>{document.documentElement.scrollTop>1650?(t.classList.add("animate__animated","animate__fadeIn"),t.classList.remove("animate__fadeOut")):(t.classList.add("animate__fadeOut"),t.classList.remove("animate__fadeIn"))})),document.querySelectorAll('[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();let t=document.documentElement.scrollTop,n=this.hash,l=document.querySelector(n).getBoundingClientRect().top,o=null;requestAnimationFrame((function e(a){null===o&&(o=a);let s=a-o,c=l<0?Math.max(t-s/.3,t+l):Math.min(t+s/.3,t+l);document.documentElement.scrollTo(0,c),c!=t+l?requestAnimationFrame(e):location.hash=n}))}))}))};window.addEventListener("DOMContentLoaded",(()=>{const s={};var c;(()=>{let e=function(){let e=document.createElement("div");e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",e.style.overflow="scroll",document.body.append(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}();const t=document.querySelector(".fixed-gift");let n;function l(l,o,a,s=!1){const c=document.querySelectorAll(l),i=document.querySelector(o),r=document.querySelector(a),d=document.querySelectorAll("[data-modal]");c.forEach((l=>{l.addEventListener("click",(o=>{o.target&&o.preventDefault(),s&&l.remove(),d.forEach((e=>{e.style.display="none",e.classList.add("animate__animated","animate__fadeIn")})),n=!0,i.style.display="block",document.body.style.marginRight=`${e}px`,document.body.style.overflow="hidden",t.style.right=`calc(2rem + ${e}px)`}))})),r.addEventListener("click",(()=>{d.forEach((e=>{e.style.display="none"})),i.style.display="none",document.body.style.marginRight="0px",document.body.style.overflow="",t.style.right="2rem"})),i.addEventListener("click",(e=>{e.target===i&&(i.style.display="none",document.body.style.marginRight="0px",document.body.style.overflow="",t.style.right="2rem")}))}l(".button-design",".popup-design",".popup-design .popup-close"),l(".button-consultation",".popup-consultation",".popup-consultation .popup-close"),l(".fixed-gift",".popup-gift",".popup-gift .popup-close",!0),setTimeout((()=>{let n;document.querySelectorAll("[data-modal]").forEach((e=>{"none"!==getComputedStyle(e).display&&(n=!0)})),n||(document.querySelector(".popup-consultation").style.display="block",document.body.style.marginRight=`${e}px`,document.body.style.overflow="hidden",t.style.right=`calc(2rem + ${e}px)`)}),5e5),window.addEventListener("scroll",(()=>{let e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);!n&&window.scrollY+document.documentElement.clientHeight>=e&&document.querySelector(".fixed-gift").click()}))})(),e(".feedback-slider-item","horizontal",".main-prev-btn",".main-next-btn"),e(".main-slider-item"),(e=>{const t=document.querySelectorAll("form"),n=document.querySelectorAll("input"),l=document.querySelectorAll("textarea"),o=document.querySelectorAll("select"),a=document.querySelectorAll('[name = "upload"]'),s=(document.querySelectorAll("select"),document.querySelector("#size"),document.querySelector("#material"),document.querySelector("#options"),document.querySelector(".promocod"),document.querySelector(".calc-price"),"Идет передача данных...");a.forEach((e=>{e.addEventListener("input",(()=>{let t;console.log(e.files[0]);const n=e.files[0].name.split(".");t=n[0].length>6?"...":".";const l=n[0].substring(0,6)+t+n[1];e.previousElementSibling.textContent=l}))})),t.forEach((t=>{t.addEventListener("submit",(c=>{c.preventDefault();let i=document.createElement("div");i.classList.add("status"),t.parentNode.appendChild(i),t.classList.add("animate__animated","animate__fadeOutUp"),setTimeout((()=>{t.style.display="none"}),400);let r=document.createElement("img");r.setAttribute("src","assets/img/spinner.gif"),r.classList.add("animate__animated","animate__fadeInUp"),i.appendChild(r);let d=document.createElement("div");d.textContent=s,i.appendChild(d);const u=new FormData(t);if("user"===t.getAttribute("data-user"))for(let t in e)u.append(t,e[t]);let m="assets/server.php";console.log(m),(async(e,t)=>{let n=await fetch(e,{method:"POST",body:t});return await n.text()})(m,u).then((e=>{console.log(e),r.setAttribute("src","assets/img/ok.png"),d.textContent="Спасибо! Скоро мы свяжемся с Вами"})).catch((()=>{r.setAttribute("src","assets/img/fail.png"),d.textContent="Что-то пошло не так, попробуйте позже"})).finally((()=>{n.forEach((e=>{e.value=""})),l.forEach((e=>e.value="")),o.forEach((e=>e.children[0].selected=!0)),a.forEach((e=>e.previousElementSibling.textContent="Файл не выбран")),setTimeout((()=>{i.remove(),t.style.display="block",t.classList.remove("animate__fadeOutUp"),t.classList.add("animate__fadeInUp")}),4e3)}))}))}))})(s),t('[name = "phone"]'),n('[name="name"]'),n('[name="message"]'),l(".button-styles","#styles .row"),((e,t,n,l,o,a)=>{const s=document.querySelector(e),c=document.querySelector(t),i=document.querySelector(n),r=document.querySelector(l),d=document.querySelector(o);let u=0;const m=()=>{u=Math.round(+s.value*+c.value+ +i.value),""==s.value||""==c.value?d.textContent="Выберите размер и материалы картины":"IWANTPOPART"===r.value?d.textContent=Math.round(.7*u):d.textContent=u};s.addEventListener("change",(()=>{m(),a.size=s.value+", "+s.options[s.selectedIndex].text,console.log(a)})),c.addEventListener("change",(()=>{m(),a.material=c.value+", "+c.options[c.selectedIndex].text,console.log(a)})),i.addEventListener("change",(()=>{m(),a.options=i.value+", "+i.options[i.selectedIndex].text,console.log(a)})),r.addEventListener("input",(()=>{m(),a.promocode=r.value,console.log(a)}))})("#size","#material","#options",".promocode",".calc-price",s),(()=>{const e=document.querySelector(".portfolio-menu"),t=e.querySelectorAll("li"),n=document.querySelectorAll(".portfolio-block"),l=document.querySelector(".portfolio-no");e.addEventListener("click",(e=>{const o=e.target;let a;const s=[...o.classList];n.forEach((e=>{e.classList.remove("animate__animated","animate__fadeIn"),l.classList.remove("animate__animated","animate__fadeIn"),s.some((t=>e.classList.contains(t)))?(e.style.display="block",e.classList.add("animate__animated","animate__fadeIn"),o.classList.add("active"),a=!0):(e.style.display="none",l.classList.add("animate__animated","animate__fadeIn"))})),l.style.display=a?"none":"block",t.forEach((e=>e.classList.remove("active"))),o.classList.add("active")}))})(),c=".sizes-block",document.querySelectorAll(c).forEach((e=>{e.addEventListener("mouseover",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-4)+"-1.png",e.querySelectorAll("p:not(.sizes-hit").forEach((e=>e.style.display="none"))}(e)})),e.addEventListener("mouseout",(()=>{!function(e){const t=e.querySelector("img");t.src=t.src.slice(0,-6)+".png",e.querySelectorAll("p:not(.sizes-hit)").forEach((e=>e.style.display="block"))}(e)}))})),o(".accordion-heading"),((e,t)=>{const n=document.querySelector(e),l=document.querySelector(t);n.style.display="none",l.addEventListener("click",(()=>{"none"===n.style.display&&window.screen.availWidth<993?(n.style.display="block",n.classList.add("animate__animated","animate__fadeIn")):n.style.display="none"})),window.addEventListener("resize",(()=>{window.screen.availWidth>992&&(n.style.display="none")}))})(".burger-menu",".burger"),a(".pageup"),(()=>{const e=document.querySelectorAll('[name="upload"]');function t(e){e.preventDefault(),e.stopPropagation()}["dragenter","draleave","dragover","drop"].forEach((n=>{e.forEach((e=>{e.addEventListener(n,t,!1)}))})),["dragenter","dragover"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{var t;(t=e).closest(".file_upload").style.border="3px solid lightgrey",t.closest(".file_upload").style.backgroundColor="darkgrey"}),!1)}))})),["dragleave","drop"].forEach((t=>{e.forEach((e=>{e.addEventListener(t,(()=>{var t;(t=e).closest(".file_upload").style.border="none",t.closest(".calc_form")?t.closest(".file_upload").style.backgroundColor="#fff":t.closest(".file_upload").style.backgroundColor="#ededed"}),!1)}))})),e.forEach((e=>{e.addEventListener("drop",(t=>{let n;e.files=t.dataTransfer.files;const l=e.files[0].name.split(".");l[0].length>6?n="...":dors=".";const o=l[0].substring(1,6)+n+l[1];e.previousElementSibling.textContent=o}))}))})()}))})();
//# sourceMappingURL=script.js.map